================================================================================
CREDIT MARKETS FINAL EXAM - COMPLETE SOLUTION
================================================================================
Calculation Date: May 3rd, 2024
================================================================================

================================================================================
PROBLEM 1: Overall Understanding of Credit Models (40 points)
================================================================================

### Problem 1a: Fixed rate bond prices in the hazard rate model ###

For a fixed rate bond in the hazard rate model:
Formula: BondPV = Î£(c/2 * e^(-k*y/2)) + e^(-T*y) with default adjustment

1. Fixed rate bond price is decreasing in interest rate: TRUE
2. Fixed rate bond price is decreasing in hazard rate: TRUE
3. Fixed rate bond price is decreasing in expected recovery rate: FALSE
4. Fixed rate bond price is decreasing in coupon: FALSE
5. Fixed rate bond price is decreasing in bond maturity: FALSE (generally)

### Problem 1b: Fixed rate bond yields in the hazard rate model ###

1. Fixed rate bond yield is decreasing in interest rate: FALSE
2. Fixed rate bond yield is decreasing in hazard rate: FALSE
3. Fixed rate bond yield is decreasing in expected recovery rate: TRUE
4. Fixed rate bond yield is independent of the coupon: TRUE
5. Fixed rate bond yield is decreasing in bond maturity: FALSE (generally)

### Problem 1c: Equity and equity volatility in Merton Structural Credit Model ###

Equity as a call option on assets with liabilities as strike

1. Equity value is decreasing with company assets: FALSE
2. Equity volatility is decreasing with company assets: TRUE
3. Equity value is decreasing with assets volatility: FALSE
4. Equity value is decreasing with company liabilities: TRUE
5. Equity volatility is decreasing with company liabilities: FALSE

### Problem 1d: Yield and expected recovery rate in Merton Structural Credit Model ###

1. Yield is decreasing with company liabilities: FALSE
2. Expected recovery rate is decreasing with company liabilities: TRUE
3. Yield is decreasing with assets volatility: FALSE
4. Credit spread is decreasing with asset values: TRUE
5. Credit spread is decreasing with assets volatility: FALSE

================================================================================
Problem 1 Complete!
================================================================================

================================================================================
PROBLEM 2: Risk and Scenario Analysis for AAPL Bond (20 points)
================================================================================

### Problem 2a: Create the AAPL fixed-rate corporate bond object ###

Loaded bond symbology: 1045 bonds

AAPL Bond Details:
Security: AAPL 4.45 05/06/44
ISIN: US037833AT77
FIGI: BBG006F8VWJ7
Coupon: 4.45%
Maturity: 2044-05-06 00:00:00

AAPL Bond Cashflows:
          CashFlowDate  CashFlowYearFrac  CashFlowAmount
19       May 6th, 2024          0.008333           2.225
20  November 6th, 2024          0.508333           2.225
21       May 6th, 2025          1.008333           2.225
22  November 6th, 2025          1.508333           2.225
23       May 6th, 2026          2.008333           2.225
24  November 6th, 2026          2.508333           2.225
25       May 6th, 2027          3.008333           2.225
26  November 6th, 2027          3.508333           2.225
27       May 6th, 2028          4.008333           2.225
28  November 6th, 2028          4.508333           2.225
29       May 6th, 2029          5.008333           2.225
30  November 6th, 2029          5.508333           2.225
31       May 6th, 2030          6.008333           2.225
32  November 6th, 2030          6.508333           2.225
33       May 6th, 2031          7.008333           2.225
34  November 6th, 2031          7.508333           2.225
35       May 6th, 2032          8.008333           2.225
36  November 6th, 2032          8.508333           2.225
37       May 6th, 2033          9.008333           2.225
38  November 6th, 2033          9.508333           2.225
39       May 6th, 2034         10.008333           2.225
40  November 6th, 2034         10.508333           2.225
41       May 6th, 2035         11.008333           2.225
42  November 6th, 2035         11.508333           2.225
43       May 6th, 2036         12.008333           2.225
44  November 6th, 2036         12.508333           2.225
45       May 6th, 2037         13.008333           2.225
46  November 6th, 2037         13.508333           2.225
47       May 6th, 2038         14.008333           2.225
48  November 6th, 2038         14.508333           2.225
49       May 6th, 2039         15.008333           2.225
50  November 6th, 2039         15.508333           2.225
51       May 6th, 2040         16.008333           2.225
52  November 6th, 2040         16.508333           2.225
53       May 6th, 2041         17.008333           2.225
54  November 6th, 2041         17.508333           2.225
55       May 6th, 2042         18.008333           2.225
56  November 6th, 2042         18.508333           2.225
57       May 6th, 2043         19.008333           2.225
58  November 6th, 2043         19.508333           2.225
59       May 6th, 2044         20.008333           2.225
60       May 6th, 2044         20.008333         100.000

### Problem 2b: Compute bond price, DV01, duration and convexity ###

AAPL Bond Market Data (as of 2024-05-03):
Mid Yield: 5.1175%

Bond Metrics (Analytic Method):
Price: 90.8899
DV01: -0.116333
Duration: 12.7994 years
Convexity: 217.8942

### Problem 2c: Compute and plot scenario bond prices ###

Scenario prices plot saved to aapl_scenario_prices.html

### Problem 2d: Compute and plot scenario durations and convexities ###
Scenario duration and convexity plots saved

================================================================================
Problem 2 Complete!
================================================================================

================================================================================
PROBLEM 3: CDS Calibration and Pricing (20 points)
================================================================================

### Problem 3a: Calibrate the US SOFR yield curve ###

SOFR Swaps Data: 8 instruments

SOFR Curve calibrated successfully
Sample zero rates (first 5 tenors):
         Date  YearFrac  DiscountFactor  ZeroRate
0  2024-06-03     0.075           0.996     5.144
1  2024-07-03     0.158           0.992     5.144
2  2024-08-03     0.244           0.988     5.144
3  2024-09-03     0.331           0.984     5.144
4  2024-10-03     0.414           0.979     5.144
